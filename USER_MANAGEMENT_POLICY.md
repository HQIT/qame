# 用户管理策略

## 用户注册限制

**本项目不提供用户注册功能。**

### 原因
- 确保用户质量和管理控制
- 防止恶意用户注册
- 简化系统架构
- 便于管理员统一管理用户

### 用户创建方式

#### 1. 系统启动时自动创建
- 系统启动时会自动创建默认管理员账户
- 用户名：`admin`
- 密码：`admin123`（可通过环境变量 `ADMIN_PASSWORD` 修改）

#### 2. 管理员通过管理控制台创建
- 管理员登录后可以访问管理控制台
- 在用户管理页面可以创建新用户
- 可以设置用户角色（user/admin）

### 用户管理功能

#### 管理员可以执行的操作：
- 创建新用户
- 修改用户信息（用户名、角色）
- 删除用户
- 查看用户列表和统计信息

#### 普通用户可以执行的操作：
- 修改自己的用户名
- 查看自己的用户信息
- 无法创建其他用户

### 安全考虑

1. **密码策略**：使用统一的salt进行SHA-256哈希
2. **权限控制**：只有管理员可以创建和管理用户
3. **会话管理**：使用JWT token和HttpOnly cookie
4. **审计日志**：所有用户操作都有记录

### 技术实现

- 用户创建：通过 `User.create()` 方法
- 密码哈希：使用统一salt的SHA-256算法
- 权限验证：通过中间件 `requireAdmin` 验证管理员权限
- 数据存储：PostgreSQL数据库

### 环境变量配置

```bash
# 管理员密码（可选，默认为admin123）
ADMIN_PASSWORD=your_admin_password

# 密码哈希salt（可选，默认为your_fixed_salt_here）
PASSWORD_SALT=your_secure_salt
```

### 注意事项

1. 生产环境中请修改默认密码和salt
2. 定期备份用户数据
3. 监控异常登录行为
4. 定期审查用户权限 